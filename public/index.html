<!DOCTYPE html>
<html lang="fr">

<head>
  <!-- Encodage et Viewport -->
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover" />

  <!-- Informations de base -->
  <title>INFODROP - Le Club privé de l'actu gamifiée</title>
  <meta name="description"
    content="INFODROP - Agrégation multi-sources en temps réel. Sortez de votre bulle de filtre et développez une vision équilibrée de l'actualité." />
  <meta name="keywords" content="actualités, news, information, gamification, diversité, média, presse, infodrop" />
  <meta name="author" content="INFODROP - 3C by Emile Marclin & L0r4.py" />
  <meta name="generator" content="React" />

  <!-- Favicons -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="/images/infodrop-favicon.png" />
  <link rel="shortcut icon" href="/images/infodrop-favicon.png" />

  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="/images/apple-touch-icon-180x180.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="/images/apple-touch-icon-167x167.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json" />

  <!-- Theme Colors -->
  <meta name="theme-color" content="#2c3e50" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#1a1a2e" media="(prefers-color-scheme: dark)" />
  <meta name="msapplication-navbutton-color" content="#2c3e50" />

  <!-- PWA iOS/Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="INFODROP" />
  <meta name="apple-mobile-web-app-orientations" content="portrait-any" />

  <!-- PWA Android/Chrome -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="INFODROP" />
  <meta name="full-screen" content="yes" />
  <meta name="screen-orientation" content="portrait" />

  <!-- PWA Windows -->
  <meta name="msapplication-TileColor" content="#2c3e50" />
  <meta name="msapplication-TileImage" content="/images/apple-touch-icon-152x152.png" />
  <meta name="msapplication-config" content="none" />
  <meta name="msapplication-starturl" content="/" />
  <meta name="msapplication-tooltip" content="INFODROP - Le Club privé de l'actu gamifiée" />

  <!-- Format Detection (désactive la détection auto sur iOS) -->
  <meta name="format-detection" content="telephone=no" />
  <meta name="format-detection" content="date=no" />
  <meta name="format-detection" content="address=no" />
  <meta name="format-detection" content="email=no" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="INFODROP" />
  <meta property="og:title" content="INFODROP - Le Club privé de l'actu gamifiée" />
  <meta property="og:description" content="Agrégation multi-sources en temps réel. Sortez de votre bulle de filtre." />
  <meta property="og:image" content="https://infodrop2.vercel.app/images/infodrop-share.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="INFODROP Logo" />
  <meta property="og:url" content="https://infodrop2.vercel.app" />
  <meta property="og:locale" content="fr_FR" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@infodrop" />
  <meta name="twitter:creator" content="@infodrop" />
  <meta name="twitter:title" content="INFODROP - Le Club privé de l'actu gamifiée" />
  <meta name="twitter:description" content="Agrégation multi-sources en temps réel. Sortez de votre bulle de filtre." />
  <meta name="twitter:image" content="https://infodrop2.vercel.app/images/infodrop-share.png" />
  <meta name="twitter:image:alt" content="INFODROP Logo" />

  <!-- Robots et SEO -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="googlebot" content="index, follow" />
  <link rel="canonical" href="https://infodrop2.vercel.app" />

  <!-- Performance et Sécurité -->
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="true" />
  <meta name="MobileOptimized" content="width" />

  <!-- Preconnect pour optimiser les performances -->
  <link rel="preconnect" href="https://api.coingecko.com" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="dns-prefetch" href="https://api.coingecko.com" />

  <!-- DNS Prefetch pour les APIs utilisées -->
  <link rel="dns-prefetch" href="https://yvmqznrpwbvkxrphdvwl.supabase.co">
  <link rel="preconnect" href="https://yvmqznrpwbvkxrphdvwl.supabase.co">

  <!-- iOS Splash Screens (optionnel mais recommandé) -->
  <!-- iPhone Xs Max (1242px x 2688px) -->
  <link rel="apple-touch-startup-image"
    media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"
    href="/images/splash-1242x2688.png" />
  <!-- iPhone Xr (828px x 1792px) -->
  <link rel="apple-touch-startup-image"
    media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"
    href="/images/splash-828x1792.png" />
  <!-- iPhone X, Xs (1125px x 2436px) -->
  <link rel="apple-touch-startup-image"
    media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"
    href="/images/splash-1125x2436.png" />
  <!-- iPhone 8 Plus, 7 Plus, 6s Plus, 6 Plus (1242px x 2208px) -->
  <link rel="apple-touch-startup-image"
    media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)"
    href="/images/splash-1242x2208.png" />
  <!-- iPhone 8, 7, 6s, 6 (750px x 1334px) -->
  <link rel="apple-touch-startup-image"
    media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"
    href="/images/splash-750x1334.png" />

  <!-- Désactiver le tap highlight sur iOS -->
  <meta name="tap-highlight-color" content="transparent" />

  <!-- Critical CSS inline pour éviter le FOUC -->
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    input,
    textarea {
      -webkit-user-select: text;
      user-select: text;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #1a1a2e;
      color: #ffffff;
      overflow-x: hidden;
      touch-action: pan-y;
    }

    #root {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }

    .app-loader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #1a1a2e;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .app-loader.hidden {
      display: none;
    }

    /* Animation de pulsation pour le loader */
    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }
    }

    .app-loader svg {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    /* Amélioration pour le mode sombre/clair */
    @media (prefers-color-scheme: light) {
      body {
        background-color: #f8f9fa;
        color: #212529;
      }

      .app-loader {
        background: #f8f9fa;
      }
    }

    /* Safe area pour iPhone X+ */
    @supports (padding: max(0px)) {
      body {
        padding-top: constant(safe-area-inset-top);
        padding-top: env(safe-area-inset-top);
        padding-bottom: constant(safe-area-inset-bottom);
        padding-bottom: env(safe-area-inset-bottom);
      }
    }
  </style>
</head>

<body>
  <noscript>
    <div style="background: #e74c3c; color: white; padding: 20px; text-align: center; font-family: sans-serif;">
      <h2>JavaScript est requis</h2>
      <p>INFODROP nécessite JavaScript pour fonctionner. Veuillez l'activer dans votre navigateur.</p>
    </div>
  </noscript>

  <!-- Loader initial -->
  <div id="app-loader" class="app-loader">
    <div style="text-align: center;">
      <div
        style="width: 80px; height: 80px; margin: 0 auto 20px; background: #2c3e50; border-radius: 20px; display: flex; align-items: center; justify-content: center;">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <path
            d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2">
          </path>
        </svg>
      </div>
      <h1 style="font-size: 24px; margin: 0; color: white;">INFODROP</h1>
      <p style="color: #888; margin-top: 10px;">Chargement...</p>
    </div>
  </div>

  <div id="root"></div>

  <script>
    // Cacher le loader quand React est prêt
    window.addEventListener('load', function () {
      setTimeout(function () {
        const loader = document.getElementById('app-loader');
        if (loader) loader.classList.add('hidden');
      }, 100);
    });

    // Détection du mode standalone PWA
    if (window.matchMedia('(display-mode: standalone)').matches) {
      console.log('🚀 INFODROP PWA mode');
      document.body.classList.add('pwa-mode');
    }

    // Prévenir le pull-to-refresh sur Chrome mobile
    let lastTouchY = 0;
    document.addEventListener('touchstart', function (e) {
      lastTouchY = e.touches[0].clientY;
    }, { passive: true });

    document.addEventListener('touchmove', function (e) {
      const touchY = e.touches[0].clientY;
      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop === 0 && touchY > lastTouchY) {
        e.preventDefault();
      }
    }, { passive: false });
  </script>
</body>

</html>